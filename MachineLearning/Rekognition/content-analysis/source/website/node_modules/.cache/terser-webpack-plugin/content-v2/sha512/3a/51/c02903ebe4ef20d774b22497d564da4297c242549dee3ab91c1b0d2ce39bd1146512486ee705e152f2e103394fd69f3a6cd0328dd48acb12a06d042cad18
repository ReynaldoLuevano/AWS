{"map":"{\"version\":3,\"sources\":[\"js/chunk-2d2302c3.9a781fb8.js\"],\"names\":[\"window\",\"push\",\"eac4\",\"module\",\"__webpack_exports__\",\"__webpack_require__\",\"r\",\"render\",\"_vm\",\"this\",\"_h\",\"$createElement\",\"_c\",\"_self\",\"staticClass\",\"attrs\",\"id\",\"responsive\",\"fixed\",\"items\",\"elasticsearch_data\",\"per-page\",\"perPage\",\"current-page\",\"currentPage\",\"fields\",\"sort-by\",\"sortBy\",\"scopedSlots\",\"_u\",\"key\",\"fn\",\"data\",\"variant\",\"on\",\"click\",\"$event\",\"setPlayerTime\",\"item\",\"EndTimestamp\",\"StartTimestamp\",\"_v\",\"_s\",\"Index\",\"align\",\"total-rows\",\"rows\",\"aria-controls\",\"model\",\"value\",\"callback\",\"$$v\",\"expression\",\"type\",\"saveFile\",\"pressed\",\"size\",\"showElasticsearchApiRequest\",\"scrollable\",\"title\",\"ok-only\",\"directives\",\"name\",\"rawName\",\"ELASTICSEARCH_ENDPOINT\",\"JSON\",\"stringify\",\"searchQuery\",\"staticRenderFns\",\"regenerator\",\"asyncToGenerator\",\"objectSpread2\",\"Loading\",\"vuex_esm\",\"ShotDetectionvue_type_script_lang_js\",\"components\",\"props\",\"mediaType\",\"String\",\"default\",\"curlCommand\",\"endTimestamp\",\"label\",\"sortable\",\"StartTimecodeSMPTE\",\"EndTimecodeSMPTE\",\"DurationSMPTE\",\"isBusy\",\"operator\",\"computed\",\"Object\",\"length\",\"watch\",\"current_time\",\"time\",\"player\",\"pause\",\"deactivated\",\"console\",\"log\",\"activated\",\"fetchAssetData\",\"mounted\",\"getCurlCommand\",\"beforeDestroy\",\"methods\",\"endMillisenconds\",\"startMilliseconds\",\"seconds\",\"currentTime\",\"play\",\"$route\",\"params\",\"asset_id\",\"AWS_REGION\",\"encodeURIComponent\",\"blob\",\"Blob\",\"e\",\"document\",\"createEvent\",\"a\",\"createElement\",\"download\",\"href\",\"URL\",\"createObjectURL\",\"dataset\",\"downloadurl\",\"join\",\"initEvent\",\"dispatchEvent\",\"_this\",\"m\",\"_callee\",\"apiName\",\"path\",\"apiParams\",\"response\",\"es_data\",\"result\",\"i\",\"len\",\"w\",\"_context\",\"n\",\"headers\",\"Content-Type\",\"queryStringParameters\",\"q\",\"default_operator\",\"$Amplify\",\"API\",\"get\",\"v\",\"showElasticSearchAlert\",\"hits\",\"Confidence\",\"lowerConfidence\",\"lowerConfidenceMessage\",\"_source\",\"parse\",\"components_ShotDetectionvue_type_script_lang_js\",\"componentNormalizer\",\"component\"],\"mappings\":\"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\"}","code":"(window[\"webpackJsonp\"]=window[\"webpackJsonp\"]||[]).push([[\"chunk-2d2302c3\"],{eac4:function(e,t,a){\"use strict\";a.r(t);var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a(\"div\",[e.isBusy?a(\"div\",{staticClass:\"wrapper\"},[a(\"Loading\")],1):a(\"div\",{staticClass:\"wrapper\"},[a(\"b-table\",{attrs:{id:\"shotTable\",responsive:\"\",fixed:\"\",items:e.elasticsearch_data,\"per-page\":e.perPage,\"current-page\":e.currentPage,fields:e.fields,\"sort-by\":e.sortBy},scopedSlots:e._u([{key:\"cell(Index)\",fn:function(t){return[a(\"b-button\",{attrs:{variant:\"link\"},on:{click:function(a){return e.setPlayerTime(t.item.EndTimestamp,t.item.StartTimestamp)}}},[e._v(\"\\n          \"+e._s(t.item.Index)+\"\\n        \")])]}}])}),a(\"b-pagination\",{attrs:{align:\"center\",\"per-page\":e.perPage,\"total-rows\":e.rows,\"aria-controls\":\"shotTable\"},model:{value:e.currentPage,callback:function(t){e.currentPage=t},expression:\"currentPage\"}}),a(\"b-button\",{attrs:{type:\"button\"},on:{click:function(t){return e.saveFile()}}},[e._v(\"\\n      Download Data\\n    \")]),a(\"br\"),a(\"b-button\",{staticClass:\"text-decoration-none\",attrs:{pressed:!1,size:\"sm\",variant:\"link\"},on:{click:function(t){e.showElasticsearchApiRequest=!0}}},[e._v(\"\\n      Show API request to get these results\\n    \")]),a(\"b-modal\",{attrs:{scrollable:\"\",title:\"SEARCH API\",\"ok-only\":\"\"},model:{value:e.showElasticsearchApiRequest,callback:function(t){e.showElasticsearchApiRequest=t},expression:\"showElasticsearchApiRequest\"}},[a(\"label\",[e._v(\"Request URL:\")]),a(\"pre\",{directives:[{name:\"highlightjs\",rawName:\"v-highlightjs\"}]},[a(\"code\",{staticClass:\"bash\"},[e._v(\"GET \"+e._s(e.ELASTICSEARCH_ENDPOINT)+\"workflow/execution\")])]),a(\"label\",[e._v(\"Search query:\")]),a(\"pre\",{directives:[{name:\"highlightjs\",rawName:\"v-highlightjs\",value:JSON.stringify(e.searchQuery),expression:\"JSON.stringify(searchQuery)\"}]},[a(\"code\",{staticClass:\"json\"})]),a(\"label\",[e._v(\"Sample command:\")]),a(\"pre\",{directives:[{name:\"highlightjs\",rawName:\"v-highlightjs\",value:e.curlCommand,expression:\"curlCommand\"}]},[a(\"code\",{staticClass:\"bash\"})])])],1)])},n=[],r=a(\"c14f\"),i=a(\"1da1\"),o=a(\"5530\"),c=(a(\"a15b\"),a(\"e9c4\"),a(\"b64b\"),a(\"d3b7\"),a(\"3ca3\"),a(\"ddb0\"),a(\"2b3d\"),a(\"bf19\"),a(\"9861\"),a(\"3a5e\")),l=a(\"2f62\"),u={name:\"ShotDetection\",components:{Loading:c[\"a\"]},props:{mediaType:{type:String,default:\"\"}},data:function(){return{curlCommand:\"\",searchQuery:\"\",showElasticsearchApiRequest:!1,sortBy:\"Index\",currentPage:1,perPage:10,endTimestamp:null,fields:[{Index:{label:\"Shot Number\",sortable:!0}},{StartTimecodeSMPTE:{label:\"Start\",sortable:!1}},{EndTimecodeSMPTE:{label:\"End\",sortable:!1}},{DurationSMPTE:{label:\"Duration\",sortable:!0}},{key:\"Confidence\",sortable:!0}],elasticsearch_data:[],isBusy:!1,operator:\"shot_detection\"}},computed:Object(o[\"a\"])(Object(o[\"a\"])(Object(o[\"a\"])({},Object(l[\"b\"])([\"player\"])),Object(l[\"b\"])([\"current_time\"])),{},{rows:function(){return this.elasticsearch_data.length}}),watch:{current_time:function(e){null!=this.endTimestamp&&(e==this.endTimestamp||e>this.endTimestamp)&&(this.player.pause(),this.endTimestamp=null)}},deactivated:function(){console.log(\"deactivated component:\",this.operator)},activated:function(){console.log(\"activated component:\",this.operator),this.fetchAssetData()},mounted:function(){this.getCurlCommand()},beforeDestroy:function(){this.elasticsearch_data=[]},methods:{setPlayerTime:function(e,t){this.endTimestamp=e/1e3;var a=t/1e3;this.player.currentTime(a),this.player.play()},getCurlCommand:function(){this.searchQuery=\"AssetId:\"+this.$route.params.asset_id+\" Operator:\"+this.operator,this.curlCommand=\"awscurl -X GET --profile default --service es --region \"+this.AWS_REGION+\" '\"+this.ELASTICSEARCH_ENDPOINT+\"/_search?q=\"+encodeURIComponent(this.searchQuery)+\"'\"},saveFile:function(){var e=JSON.stringify(this.elasticsearch_data),t=new Blob([e],{type:\"text/plain\"}),a=document.createEvent(\"MouseEvents\"),s=document.createElement(\"a\");s.download=\"data.json\",s.href=window.URL.createObjectURL(t),s.dataset.downloadurl=[\"text/json\",s.download,s.href].join(\":\"),a.initEvent(\"click\",!0,!1,window,0,0,0,0,0,!1,!1,!1,!1,0,null),s.dispatchEvent(a)},fetchAssetData:function(){var e=this;return Object(i[\"a\"])(Object(r[\"a\"])().m((function t(){var a,s,n,i,o,c,l,u,d;return Object(r[\"a\"])().w((function(t){while(1)switch(t.n){case 0:return\"AssetId:\"+e.$route.params.asset_id+\" Operator:\"+e.operator,a=\"contentAnalysisElasticsearch\",s=\"/_search\",n={headers:{\"Content-Type\":\"application/json\"},queryStringParameters:{q:e.searchQuery,default_operator:\"AND\",size:1e4}},t.n=1,e.$Amplify.API.get(a,s,n);case 1:if(i=t.v,console.log(i),i){t.n=2;break}e.showElasticSearchAlert=!0,t.n=4;break;case 2:return o=[],t.n=3,i;case 3:if(c=t.v,l=c.hits.hits,0===l.length&&e.Confidence>55)e.lowerConfidence=!0,e.lowerConfidenceMessage=\"Try lowering confidence threshold\";else for(e.lowerConfidence=!1,u=0,d=l.length;u<d;u++)o.push(l[u]._source);e.elasticsearch_data=JSON.parse(JSON.stringify(o)),e.isBusy=!1;case 4:return t.a(2)}}),t)})))()}}},d=u,h=a(\"2877\"),p=Object(h[\"a\"])(d,s,n,!1,null,null,null);t[\"default\"]=p.exports}}]);","extractedComments":[]}